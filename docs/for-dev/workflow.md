# 工作流程

## 开发模型
本项目采用敏捷火车的方式进行开发

### 一次开发周期
- 周期开始前(开新车)
周期开始前PM就应该开始做好需求评审, 确定好各个RD的工作(新feature & bugfix)并制定排期等.
- 周期开始 ~ 中期(车票上车)
RD负责新feature的开发以及bugfix, PM以及QA负责验收相关feat/bug
- 周期末期(补票上车)
RD再排期允许的情况下进行简单的bugfix
- 周期结束(发车)
OP进行项目的发版
### Hotfix
若上线后QA发现软件有bug, 则应该提给PM, PM会对bug的优先级/修复的工作量等进行评估, 若bugfix的优先度不高则放到后续版本进行修复, 若优先度较高则放在当前版本进行修复.

hotfix同样符合上文的"一次开发周期"规范, 并且在发车后, hotfix的分支`release/0.1.3`应该直接并入master中, 开发人员需要立即再将master合并到release/0.2.0中,
### 分支规范

- `master/release`: 主版本
    - 每一次开新车前会从`master`分支中拉取新分支`release/x.x.x`, 并将`release/x.x.x`
    - `release`分支以`release/x.x.x`作为实际命名, 第一位数字为大版本, 一般一次大型更新时会在第一位`+1`, 需求的日常迭代等会再第二位`+1`, hotfix会在第三位`+1`.
        - 例如`230203~230303`的版本中, 版本会从原来的`0.1.0`迭代为`0.2.0`, `0.2.0`的发版时间为230303, 若`230203`~`230303`中途有相关的hotfix分支, 则应该命名为`0.1.1`
    - 发车时应该将release分支并入master中
- `dev`: 开发版本
    - `feat/xxx`: 需求分支的命名规范: 开发一个新的feature时, 应该从当前火车的版本`release/x.x.x`中拉取, 并在测试验收结束后向`release/x.x.x`发起`merge request`
    - `fix/xxx`: bugfix分支的命名规范: 进行某一个bugfix时, 应该从当前火车的版本中拉取, 并在测试验收结束后向`release/x.x.x`发起`merge request`

## 环境分离

### 本地/测试环境
RD在进行开发时不应该使用线上环境, 可以在本地部署.
### ~~Stable环境(仍未开发)~~
若条件允许, 可以新建一个Stable环境, 专门部署release代码, 并在此次版本确认无误后直接将其合入Master中. 若存在Stable分支, 则线上环境直接部署Master
### 线上环境
每次发车时OP会拉取当前版本的release代码进行部署, 若后续正常的话会将该代码合入master中, 若有致命的缺陷则会重新部署master.